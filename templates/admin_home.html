{% extends "base_admin.html" %}

{% block title %}Admin Home{% endblock %}

{% block content %}
<body class="text-white">
    <div class="dashboard-container">
        <div class="main-content">
            <h1>Welcome back!</h1>
            <p class="h2">Admin Dashboard</p>
        </div>
    </div>
    {% with messages = get_flashed_messages(with_categories=true) %}
        {% if messages %}
            {% for category, message in messages %}
                <div class="alert alert-{{ category }}">{{ message }}</div>
            {% endfor %}
        {% endif %}
    {% endwith %}
        <!-- Bootstrap row container -->
         <div class="row">
            <!-- Left column: Creating Stocks -->
             <div class="col-md-6 mb-4">
                <div class="card" style="background-color: rgba(128, 0, 128, 0.8);">
                    <div class="card-header">
                        <h5 class="text-white mb-0">Create Stocks</h5>
                    </div>
                    <div class="card-body">
                        <form method="POST" action="{{url_for('admin_home')}}">
                            <!-- First row of inputs fields -->
                            <div class="row mb-3">
                                <div class="col-6">
                                    <input type="text" name="company_name" class="form-control" placeholder="Company Name" required>
                                </div>
                                <div class="col-6">
                                    <input type="text" name="ticker" class="form-control" placeholder="Ticker" required>
                                </div>
                            </div>
                            <div class="row mb-3">
                                <div class="col-6">
                                    <input type="number" step="0.01" name="price" class="form-control" placeholder="Price" required>
                                </div>
                                <div class="col-6">
                                    <input type="text" name="volume" class="form-control" placeholder="Volume (Max: 99,999)">
                                </div>
                            </div>
                            <!-- Submit button for creating new stock -->   
                            <button class="btn btn-success">Create</button>
                        </form>
                    </div>
                </div>
            </div>

         <!-- Market Schedule -->
         <div class="col-md-5 mb-3">
            <div class="card" style="background-color: rgba(128, 0, 128, 0.8)">
                <div class="card-header">
                    <h5 class="text-white mb-0">Set Market Schedule</h5>
                </div>
                <!-- Card body containing all form elements -->
                <div class="card-body">
                    <!-- Current schedule display section -->
                        <div class="card-body">
                        <!-- Current market days display -->
                        <form class="Setting Market Days">
                            <div class="mb-3">
                                <label class="form-label text-white">Current Market Days</label>
                                <input type="text" class="form-control" value="Set with Opening and Closing Day" readonly>
                                <div class="row">
                                    <!-- Opening day dropdowns -->
                                    <div class="col-md-5">
                                        <label class="form-label text-white small">Opening Day</label>
                                        <select name="opening_hour" class="form-select" required>
                                            <option value="Sunday">Sunday</option>
                                            <option value="Monday">Monday</option>
                                            <option value="Tuesday">Tuesday</option>
                                            <option value="Wednesday">Wednesday</option>
                                            <option value="Thursday">Thursday</option>
                                            <option value="Friday">Friday</option>
                                            <option value="Saturday">Saturday</option>
                                        </select>
                                    </div>
                                    <!-- Closing day dropdown -->
                                    <div class="col-md-5">
                                        <label class="form-label text-white small">Closing Day</label>
                                        <select name="closing_day" class="form-select" required>
                                            <option value="Sunday">Sunday</option>
                                            <option value="Monday">Monday</option>
                                            <option value="Tuesday">Tuesday</option>
                                            <option value="Wednesday">Wednesday</option>
                                            <option value="Thursday">Thursday</option>
                                            <option value="Friday">Friday</option>
                                            <option value="Saturday">Saturday</option>
                                        </select>
                                    </div>
                                </div>
                            </div>
                            <button type="submit" class="btn btn-success">Update Operating Days</button>
                        </form>
                        <div class="mb-3 mt-3">
                            <label class="form-label text-white">Exclude Dates</label>
                            <div class="dropdown">
                                <button class="btn btn-light dropdown-toggle w-100" type="button" data-bs-toggle="dropdown">
                                    Select holidays to exclude
                                </button>
                                <ul class="dropdown-menu w-100"><!-- Holiday exclusion dropdown section -->
                                    <li><a class="dropdown-item" href="#">New Year's Day (January 1)</a></li>
                                    <li><a class="dropdown-item" href="#">Martin Luther King Jr. Day (3rd Monday in January)</a></li>
                                    <li><a class="dropdown-item" href="#">Washington's Birthday / Presidents' Day (3rd Monday in February)</a></li>
                                    <li><a class="dropdown-item" href="#">Memorial Day (Last Monday in May)</a></li>
                                    <li><a class="dropdown-item" href="#">Juneteenth (June 19)</a></li>
                                    <li><a class="dropdown-item" href="#">Independence Day (July 4)</a></li>
                                    <li><a class="dropdown-item" href="#">Labor Day (1st Monday in September)</a></li>
                                    <li><a class="dropdown-item" href="#">Columbus Day (2nd Monday in October)</a></li>
                                    <li><a class="dropdown-item" href="#">Veterans Day (November 11)</a></li>
                                    <li><a class="dropdown-item" href="#">Thanksgiving Day (4th Thursday in November)</a></li>
                                    <li><a class="dropdown-item" href="#">Christmas Day (December 25)</a></li>
                                </ul>
                            </div>
                        </div>
                        <button class="btn btn-success">Confirm</button>
                    </div>
                </div>
            </div>
         </div>
    </div>

    <!-- Bottom row: Market Hours Card -->
    <div class="row mt-4">
        <div class="col-md-12">
            <div class="card" style="background-color: rgba(128, 0, 128, 0.8)">
                <div class="card-header">
                    <h5 class="text-white mb-0">Set Market Hours</h5>
                </div>
                <div class="card-body">
                    <!-- Current market hours display -->
                    <form method="POST" action="{{ url_for('update_market_hours') }}" id="marketHoursForm">
                        <div class="mb-3">
                            <label class="form-label text-white">Current Market Hours</label>
                            <input type="text" class="form-control" value="{{ market_hours.opening_time.strftime('%I:%M %p') }} - {{ market_hours.closing_time.strftime('%I:%M %p') }}" readonly>
                            <div class="row">
                                <!-- Opening time dropdowns -->
                                <div class="col-md-3">
                                    <label class="form-label text-white small">Opening Hour</label>
                                    <select name="opening_hour" class="form-select" required>
                                        <option value="6" {% if market_hours.opening_time.hour == 6 %}selected{% endif %}>6:00</option>
                                        <option value="7" {% if market_hours.opening_time.hour == 7 %}selected{% endif %}>7:00</option>
                                        <option value="8" {% if market_hours.opening_time.hour == 8 %}selected{% endif %}>8:00</option>
                                        <option value="9" {% if market_hours.opening_time.hour == 9 %}selected{% endif %}>9:00</option>
                                        <option value="10" {% if market_hours.opening_time.hour == 10 %}selected{% endif %}>10:00</option>
                                    </select>
                                </div>
                                
                                <div class="col-md-3">
                                    <label class="form-label text-white small">AM/PM</label>
                                    <select name="opening_meridiem" class="form-select" required>
                                        <option value="AM" selected>AM</option>
                                        <option value="PM">PM</option>
                                    </select>
                                </div>
                                
                                <!-- Closing time dropdowns -->
                                <div class="col-md-3">
                                    <label class="form-label text-white small">Closing Hour</label>
                                    <select name="closing_hour" class="form-select" required>
                                        <option value="3">3:00</option>
                                        <option value="4">4:00</option>
                                        <option value="5" selected>5:00</option>
                                        <option value="6">6:00</option>
                                        <option value="7">7:00</option>
                                    </select>
                                </div>
                                
                                <div class="col-md-3">
                                    <label class="form-label text-white small">AM/PM</label>
                                    <select name="closing_meridiem" class="form-select" required>
                                        <option value="AM">AM</option>
                                        <option value="PM" selected>PM</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                        <button type="submit" class="btn btn-success">Update Hours</button>
                    </form>
                </div>
            </div>
        </div>
    </div>
</body>
{% endblock %}